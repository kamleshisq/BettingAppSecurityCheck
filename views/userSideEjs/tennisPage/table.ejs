<%if(liveTennis.length > 0 || upcomintTennis.length > 0){%>
  <div class="exchange-pg-tbl-ro2">
    <table class="acount-stat-tbl">

      <thead class="acount-stat-tbl-hed">
          <tr class="acount-stat-tbl-hed-tr" data-href='/exchange/tennis'>
              <th style="text-align: left;" class="bod-red-lft ">Tennis</th>
              <th></th>
              <th colspan="2">1</th>
              <th colspan="2">X</th>
              <th colspan="2" class="bod-red-rit">2</th>
          </tr>
      </thead>

      <tbody class="acount-stat-tbl-body">
        <% let cricketNum = 1 %>
        <%for(let i = 0; i < liveTennis.length; i++){%>
          <%if(liveTennis[i].marketList.match_odd != null){%>
            <%
              var timestamp = `${liveTennis[i].eventData.time}` * 1000; 
              var date = new Date(timestamp);
              var options = { 
                day: '2-digit',
                month: 'short'
              };
              var formattedTime = date.toLocaleString('en-US', options);
            %>
            <% let player1Score = 'N/A'; %>
            <% let player2Score = 'N/A'; %>
            <%if(liveTennis[i].marketList.score != null){%>
              <% const cheerio = require('cheerio'); %>
              <% const $ = cheerio.load(liveTennis[i].marketList.score[0].data); %>


              <% const player1Sets = $('.tennis-player').first().find('.set.current'); %>
              <% const player2Sets = $('.tennis-player').eq(1).find('.set.current'); %>

              <% if (player1Sets.length === 3 && player2Sets.length === 3) { %>
                  <% const p1Set1 = parseInt(player1Sets.eq(0).text(), 10); %>
                  <% const p1Set2 = parseInt(player1Sets.eq(1).text(), 10); %>
                  <% const p1Set3 = parseInt(player1Sets.eq(2).text(), 10); %>
                  <% const p2Set1 = parseInt(player2Sets.eq(0).text(), 10); %>
                  <% const p2Set2 = parseInt(player2Sets.eq(1).text(), 10); %>
                  <% const p2Set3 = parseInt(player2Sets.eq(2).text(), 10); %>

                  <% player1Score = p1Set3 - p1Set1; %>
                  <% player2Score = p2Set3 - p2Set1; %>
              <% } %>
            <%}%>


            <tr class="acount-stat-tbl-body-tr tbl-data-href" onclick="window.location.href = '/exchange_inPlay/match?id=<%=liveTennis[i].eventData.eventId%>'; ">
                <td style="border-bottom: 0px;" class="name1" id="<%=liveTennis[i].marketList.match_odd.marketId%>" >
                  <div class="exchange-pg-mytbl-body-cricket-data-dv">
                    <span class="exchange-pg-mytbl-body-liv-dot"></span>
                    <p>
                      <span><%=liveTennis[i].eventData.league%></span> • <%=formattedTime%>
                    </p>
                    <p>
                        <b><%=liveTennis[i].eventData.name%></b>
                    </p>
                    <%if(liveTennis[i].marketList.score != null){%>
                      <span class="ctbal-scor-spn-wrp">
                        <span class="ctbal-scor-spn1"><%=player1Score%></span>
                        <span class="ctbal-scor-spn2"><%=player2Score%></span>
                      </span>
                    <% }%>
                </div>
                </td>
                <td style="border-bottom: 0px;" >
                  <div class="exchange-td2-txtdv">
                    <%if(liveTennis[i].eventData.isTv){%>
                      <div class="exchange-td2-txtdv-inn1">
                        <p> </p>
                        <img src="/assets/img/fontisto_tv.png" alt="">
                      </div>
                    <%}%>
                    <div class="exchange-td2-txtdv-inn1">
                      <p> MO </p>
                      <span>35</span>
                    </div>
                    <div class="exchange-td2-txtdv-inn1">
                      <p> F </p>
                      <span>1</span>
                    </div>
                    <div class="exchange-td2-txtdv-inn1">
                      <p> M </p>
                      <span>1</span>
                    </div>
                    <div class="exchange-td2-txtdv-inn1">
                      <p> L </p>
                      <span>1</span>
                    </div>
                  </div>
                </td>
                <% let runners = JSON.parse(liveTennis[i].marketList.match_odd.runners); %>
                <% let runners1 = []; %>
                <%let secIds = []; %>
                <%runners.forEach(item => {%>
                    <%runners1.push(item.runner);%>
                    <%secIds.push(item.secId);%>
                <%});%>
                <%if(runners1.length === 2){%>
                <td style="border-bottom: 0px;"  class="0B" id="<%=secIds[0]%>"></td>
                <td style="border-bottom: 0px;"  class="0L" id="<%=secIds[0]%>"></td>
                <td style="border-bottom: 0px;"  class="">-</td>
                <td style="border-bottom: 0px;"  class="">-</td>
                <td style="border-bottom: 0px;"  class="1B" id="<%=secIds[1]%>"></td>
                <td style="border-bottom: 0px;"  class="1L" id="<%=secIds[1]%>"></td>
                <td style="border-bottom: 0px;">
                  <a href="multi-market.html"><img src="../../assets/img/exchange/Vector.png" alt=""></a> 
                </td>
                <%}else{%>
                  <td style="border-bottom: 0px;"  class="0B" id="<%=secIds[0]%>"></td>
                    <td style="border-bottom: 0px;"  class="0L" id="<%=secIds[0]%>"></td>
                    <td style="border-bottom: 0px;"  class="2B" id="<%=secIds[2]%>"></td>
                    <td style="border-bottom: 0px;"  class="2L" id="<%=secIds[2]%>"></td>
                    <td style="border-bottom: 0px;"  class="1B" id="<%=secIds[1]%>"></td>
                    <td style="border-bottom: 0px;"  class="1L" id="<%=secIds[1]%>"></td>
                    <td style="border-bottom: 0px;">
                      <a href="multi-market.html"><img src="../../assets/img/exchange/Vector.png" alt=""></a> 
                    </td>
                <%}%>
            </tr>
            <%cricketNum++%>
          <%}%>
        <%}%>
        <% j = cricketNum %>
        <%for(let i = 0; i < upcomintTennis.length; i++){%>
          <%if(upcomintTennis[i].marketList.match_odd != null){%>
            <%
              var timestamp = `${upcomintTennis[i].eventData.time}` * 1000; 
              var date = new Date(timestamp);
              var options = { 
                day: '2-digit',
                month: 'short'
              };
              var formattedTime = date.toLocaleString('en-US', options);
            %>
            <tr class="acount-stat-tbl-body-tr tbl-data-href"  onclick="window.location.href = '/exchange_inPlay/match?id=<%=upcomintTennis[i].eventData.eventId%>'; ">
              <td style="border-bottom: 0px;" class="name1" id="<%=upcomintTennis[i].marketList.match_odd.marketId%>" >
                <div class="exchange-pg-mytbl-body-cricket-data-dv">
                  <%= j%>)
                  <p>
                    <span><%=upcomintTennis[i].eventData.league%></span> • <%=formattedTime%>
                  </p>
                  <p>
                      <b><%=upcomintTennis[i].eventData.name%></b>
                  </p>
              </div>
              </td>
              <td style="border-bottom: 0px;" >
                <div class="exchange-td2-txtdv">
                  <div class="exchange-td2-txtdv-inn1">
                    <p> MO </p>
                    <span>35</span>
                  </div>
                  <div class="exchange-td2-txtdv-inn1">
                    <p> F </p>
                    <span>1</span>
                  </div>
                  <div class="exchange-td2-txtdv-inn1">
                    <p> M </p>
                    <span>1</span>
                  </div>
                  <div class="exchange-td2-txtdv-inn1">
                    <p> L </p>
                    <span>1</span>
                  </div>
                </div>
              </td>
              <% let runners = JSON.parse(upcomintTennis[i].marketList.match_odd.runners); %>
              <% let runners1 = []; %>
              <%let secIds = []; %>
              <%runners.forEach(item => {%>
                  <%runners1.push(item.runner);%>
                  <%secIds.push(item.secId);%>
              <%});%>
              <%if(runners1.length === 2){%>
                <td style="border-bottom: 0px;"  class="0B" id="<%=secIds[0]%>"></td>
                <td style="border-bottom: 0px;"  class="0L" id="<%=secIds[0]%>"></td>
                <td style="border-bottom: 0px;"  class="">-</td>
                <td style="border-bottom: 0px;"  class="">-</td>
                <td style="border-bottom: 0px;"  class="1B" id="<%=secIds[1]%>"></td>
                <td style="border-bottom: 0px;"  class="1L" id="<%=secIds[1]%>"></td>
                <td style="border-bottom: 0px;">
                  <a href="multi-market.html"><img src="../../assets/img/exchange/Vector.png" alt=""></a> 
                </td>
                <%}else{%>
                    <td style="border-bottom: 0px;"  class="0B" id="<%=secIds[0]%>"></td>
                    <td style="border-bottom: 0px;"  class="0L" id="<%=secIds[0]%>"></td>
                    <td style="border-bottom: 0px;"  class="2B" id="<%=secIds[2]%>"></td>
                    <td style="border-bottom: 0px;"  class="2L" id="<%=secIds[2]%>"></td>
                    <td style="border-bottom: 0px;"  class="1B" id="<%=secIds[1]%>"></td>
                    <td style="border-bottom: 0px;"  class="1L" id="<%=secIds[1]%>"></td>
                    <td style="border-bottom: 0px;">
                      <a href="multi-market.html"><img src="../../assets/img/exchange/Vector.png" alt=""></a> 
                    </td>
              <%}%>
            </tr>
            <%j++%>
          <%}%>
        <%}%>
          
      </tbody>

    </table>
</div>
  <%}%>  