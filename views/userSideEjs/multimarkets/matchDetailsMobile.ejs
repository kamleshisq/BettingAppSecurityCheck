<div class="mbl-exc-inn-tab-dv-main">
  <div class="container-fluid">
    <%-include("../navbar2")%>
    
    <%if(multimarket != null && multimarket.marketIds && multimarket.marketIds.length > 0){%>
    <div class="mbl-exc-inn-tbl-datadv">
      <%
        for(let i = 0; i < multimarket.marketIds.length; i++){
          let result
          let isBookmaker = false
          let isToss = false
          result = sportData[0].gameList[0].eventList.find(item => item.marketList.match_odd != null&&  item.marketList.match_odd.marketId == multimarket.marketIds[i])
          if(!result){
            let footBall = sportData[1].gameList.find(item => item.sport_name === "Football")
            footBall = footBall.eventList
            result = footBall.find(item => item.marketList.match_odd != null&&  item.marketList.match_odd.marketId == multimarket.marketIds[i])
            if(!result){
              let Tennis = sportData[1].gameList.find(item => item.sport_name === "Tennis")
              Tennis = Tennis.eventList
              result = Tennis.find(item => item.marketList.match_odd != null&&  item.marketList.match_odd.marketId == multimarket.marketIds[i])
              if(!result){
                result = sportData[0].gameList[0].eventList.find(item => item.marketList.bookmaker != null && item.marketList.bookmaker[0] &&  item.marketList.bookmaker[0].marketId == multimarket.marketIds[i])
                      if(result){
                        isBookmaker = true
                      }else{
        
                          result = sportData[0].gameList[0].eventList.find(item => item.marketList.bookmaker != null && item.marketList.bookmaker[1] &&  item.marketList.bookmaker[1].marketId == multimarket.marketIds[i])
                          if(result){
                            isToss = true
                          }
                      }
                      if(!result){
                        
        
                        result = Tennis.find(item => item.marketList.bookmaker != null&&  item.marketList.bookmaker[0].marketId == multimarket.marketIds[i])
                      if(result){
                        isBookmaker = true
                      }else{
        
                          result = Tennis.find(item => item.marketList.bookmaker != null && item.marketList.bookmaker[1] &&  item.marketList.bookmaker[1].marketId == multimarket.marketIds[i])
                          if(result){
                            isToss = true
                          }
                      }
        
                      }
                    }
                }
            }
          
        %>
        <%if(result){%>
          <%if(!isBookmaker && !isToss){%>
          <div class="mbl-exc-inn-tbl-datadv-wrp">
            <div class="exchange-pg-inn-banner-col-titi-wrpp">
              <div class="exchange-pg-inn-banner-col-titi">
                <div class="exchange-pg-inn-banner-col-titi-txt">
                    <h6><span> <%=result.eventData.name%> || Match Odds</span> <span class="game-info-popup-spn" data-bs-toggle="modal" data-bs-target="#gameroulspop"> 
                      <i class="fa-solid fa-circle-info"></i> 
                    </span></h6>
                </div>
                <div class="exchange-pg-inn-banner-col-titi-txt-tim">
                    <h6><b>Min : 100, Max : 1000</b></h6>
                </div>
              </div>
              <button class="multi_market" id="<%=result.marketList.match_odd.marketId%>"><img src="http://ollscores.com:8080/assets/img/exchange/Vector2.svg" alt=""></button>
            </div>
        
            <div class="exc-inn-colaps-data-wrpdv">
        
              <table class="acount-stat-tbl" id="<%=result.marketList.match_odd.marketId%>">
        
                <thead class="acount-stat-tbl-hed2">
                    <tr class="acount-stat-tbl-hed-tr2">
                        <th style="text-align: left;" class="bod-red-lft ">Market</th>
                        <th style="text-align: center;" colspan="2">Back</th>
                        <th style="text-align: center;" colspan="2" class="bod-red-rit">Lay</th>
                    </tr>
                </thead>
                <% let runners = JSON.parse(result.marketList.match_odd.runners); %>
                <% const runners1 = []; %>
                <%const secIds = []; %>
                <%runners.forEach(item => {%>
                    <%runners1.push(item.runner);%>
                    <%secIds.push(item.secId);%>
                <%});%>
                <tbody class="acount-stat-tbl-body">
                  <%for(let j = 0; j < runners1.length; j++){%>
                        <tr class="acount-stat-tbl-body-tr tbl-data-href" data-href="#">
                            <td colspan="2" style=" text-align: left;">
                              <%=runners1[j]%>
                            </td>
                            
                            <td>
                              <span data-bs-toggle="collapse" href="#bt-slp-colps-match-odds-<%=j%><%=i%>" role="button" aria-expanded="false" aria-controls="bt-slp-colps-match-odds-<%=j%><%=i%>" class="tbl-bg-blu-spn match_odd_Blue button collapsed" id="<%=secIds[j]%>3">
                                      
                              </span> 
                            </td>
              
                            
              
                            <td>
                              <span data-bs-toggle="collapse" href="#bt-slp-colps-match-odds-<%=j%><%=i%>" role="button" aria-expanded="false" aria-controls="bt-slp-colps-match-odds-<%=j%><%=i%>" class="tbl-bg-pech-spn match_odd_Red button collapsed" id="<%=secIds[j]%>6">
                                      
                              </span> 
                            </td>
                            
                            
                            
                        </tr>
                        <tr>
                            <td colspan="8">
                              <div class="my-exc-inn-colaps-txt-dv collapse" id="bt-slp-colps-match-odds-<%=j%><%=i%>" >
                                
                              </div>
                            </td>
                          </tr>
                    <%} %>
                  
              </tbody>
              </table>
        
              
            </div>
          </div>
          <%}else if (isBookmaker && !isToss){%>
            <div class="mbl-exc-inn-tbl-datadv-wrp">
              <div class="exchange-pg-inn-banner-col-titi-wrpp">
                <div class="exchange-pg-inn-banner-col-titi">
                  <div class="exchange-pg-inn-banner-col-titi-txt">
                      <h6><span> <%=result.eventData.name%> || Bookmaker</span> <span class="game-info-popup-spn" data-bs-toggle="modal" data-bs-target="#gameroulspop"> 
                        <i class="fa-solid fa-circle-info"></i> 
                      </span></h6>
                  </div>
                  <div class="exchange-pg-inn-banner-col-titi-txt-tim">
                      <h6><b>Min : 100, Max : 1000</b></h6>
                  </div>
                </div>
                <button class="multi_market" id="<%=result.marketList.bookmaker[0].marketId%>"><img src="http://ollscores.com:8080/assets/img/exchange/Vector2.svg" alt=""></button>
              </div>
          
              <div class="exc-inn-colaps-data-wrpdv">
          
                <table class="acount-stat-tbl" id="<%=result.marketList.bookmaker[0].marketId%>">
          
                  <thead class="acount-stat-tbl-hed2">
                      <tr class="acount-stat-tbl-hed-tr2">
                          <th style="text-align: left;" class="bod-red-lft ">Market</th>
                          <th style="text-align: center;" colspan="2">Back</th>
                          <th style="text-align: center;" colspan="2" class="bod-red-rit">Lay</th>
                      </tr>
                  </thead>
                  <%
                  let StringData = result.marketList.bookmaker[0].runners
                  const cleanedString = StringData.replace(/'/g, '');
                  const jsonData = JSON.parse(cleanedString);
              %>
                  <tbody class="acount-stat-tbl-body">
                    <%for(let j = 0; j < jsonData.length; j++){%>
                          <tr class="acount-stat-tbl-body-tr tbl-data-href" data-href="#">
                              <td colspan="2" style=" text-align: left;">
                               
                              </td>
                              
                              <td>
                                <span data-bs-toggle="collapse" href="#bt-slp-colps-bookmaker-<%=i%>" role="button" aria-expanded="false" aria-controls="bt-slp-colps-bookmaker-<%=i%>" class="tbl-bg-blu-spn match_odd_Blue button collapsed" id="<%=jsonData[i].secId%>1">
                                        
                                </span> 
                              </td>
                
                              
                
                              <td>
                                <span data-bs-toggle="collapse" href="#bt-slp-colps-bookmaker-<%=i%>" role="button" aria-expanded="false" aria-controls="bt-slp-colps-bookmaker-<%=i%>" class="tbl-bg-pech-spn match_odd_Red button collapsed" id="<%=jsonData[i].secId%>2">
                                        
                                </span> 
                              </td>
                              
                              
                              
                          </tr>
                          <tr>
                              <td colspan="8">
                                <div class="my-exc-inn-colaps-txt-dv collapse" id="bt-slp-colps-bookmaker-<%=i%>" >
                                  
                                </div>
                              </td>
                            </tr>
                      <%} %>
                    
                </tbody>
                </table>
          
                
              </div>
            </div>
          <%}%>
        <%} %>
        <%}%>
    </div>
    <%}else{ %>
      <p>There are currently no followed multi markets.</p>
    <%}%>
  </div>
</div>