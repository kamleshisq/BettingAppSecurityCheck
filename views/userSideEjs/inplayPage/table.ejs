<%if(LiveCricket.length > 0 ){%>
  <div class="exchange-pg-tbl-ro2">
        <table class="acount-stat-tbl">

          <thead class="acount-stat-tbl-hed">
              <tr class="acount-stat-tbl-hed-tr" data-href='/exchange/cricket'>
                  <th style="text-align: left;" class="bod-red-lft ">Cricket</th>
                  <th></th>
                  <th colspan="2">1</th>
                  <th colspan="2">X</th>
                  <th colspan="2" class="bod-red-rit">2</th>
              </tr>
          </thead>

          <tbody class="acount-stat-tbl-body">
            <% let cricketNum = 1 %>
            <%for(let i = 0; i < LiveCricket.length; i++){%>
              <%if(LiveCricket[i].marketList.match_odd != null){%>
                <%
                  var timestamp = `${LiveCricket[i].eventData.time}` * 1000; 
                  var date = new Date(timestamp);
                  var options = { 
                    day: '2-digit',
                    month: 'short'
                  };
                  var formattedTime = date.toLocaleString('en-US', options);
                %>
                <tr class="acount-stat-tbl-body-tr tbl-data-href" onclick="window.location.href = '/exchange_inPlay/match?id=<%=LiveCricket[i].eventData.eventId%>'; ">
                    <td style="border-bottom: 0px;" class="name1" id="<%=LiveCricket[i].marketList.match_odd.marketId%>" >
                      <div class="exchange-pg-mytbl-body-cricket-data-dv">
                        <span class="exchange-pg-mytbl-body-liv-dot"></span>
                        <p>
                          <span><%=LiveCricket[i].eventData.league%></span> • <%=formattedTime%>
                        </p>
                        <p>
                            <b><%=LiveCricket[i].eventData.name%></b>
                        </p>
                    </div>
                    </td>
                    <td style="border-bottom: 0px;" >
                      <div class="exchange-td2-txtdv">
                        <%if(LiveCricket[i].eventData.isTv){%>
                          <div class="exchange-td2-txtdv-tv">
                            <i class="fa-solid fa-tv c-activee"></i>
                          </div>
                        <%}%>
                        <div class="exchange-td2-txtdv-inn1">
                          <p> MO </p>
                          <span>35</span>
                        </div>
                        <div class="exchange-td2-txtdv-inn1">
                          <p> F </p>
                          <span>1</span>
                        </div>
                        <div class="exchange-td2-txtdv-inn1">
                          <p> M </p>
                          <span>1</span>
                        </div>
                        <div class="exchange-td2-txtdv-inn1">
                          <p> L </p>
                          <span>1</span>
                        </div>
                      </div>
                    </td>
                    <% let runners = JSON.parse(LiveCricket[i].marketList.match_odd.runners); %>
                    <% let runners1 = []; %>
                    <%let secIds = []; %>
                    <%runners.forEach(item => {%>
                        <%runners1.push(item.runner);%>
                        <%secIds.push(item.secId);%>
                    <%});%>
                    <%if(runners1.length === 2){%>
                    <td style="border-bottom: 0px;"  class="0B" id="<%=secIds[0]%>"></td>
                    <td style="border-bottom: 0px;"  class="0L" id="<%=secIds[0]%>"></td>
                    <td style="border-bottom: 0px;"  class="">
                      <span class="tbl-td-bg-blu-spn mylock-data">
                        <i class="fa-solid fa-lock"></i>
                      </span>
                    </td>
                    <td style="border-bottom: 0px;"  class="">
                      <span class="tbl-td-bg-pich-spn mylock-data">
                        <i class="fa-solid fa-lock"></i>
                      </span>
                    </td>
                    <td style="border-bottom: 0px;"  class="1B" id="<%=secIds[1]%>"></td>
                    <td style="border-bottom: 0px;"  class="1L" id="<%=secIds[1]%>"></td>
                    <td style="border-bottom: 0px;">
                      <a href="multi-market.html"><img src="../../assets/img/exchange/Vector.png" alt=""></a> 
                    </td>
                    <%}else{%>
                      <td style="border-bottom: 0px;"  class="0B" id="<%=secIds[0]%>"></td>
                        <td style="border-bottom: 0px;"  class="0L" id="<%=secIds[0]%>"></td>
                        <td style="border-bottom: 0px;"  class="2B" id="<%=secIds[2]%>"></td>
                        <td style="border-bottom: 0px;"  class="2L" id="<%=secIds[2]%>"></td>
                        <td style="border-bottom: 0px;"  class="1B" id="<%=secIds[1]%>"></td>
                        <td style="border-bottom: 0px;"  class="1L" id="<%=secIds[1]%>"></td>
                        <td style="border-bottom: 0px;">
                          <a href="multi-market.html"><img src="../../assets/img/exchange/Vector.png" alt=""></a> 
                        </td>
                    <%}%>
                </tr>
                <%cricketNum++%>
              <%}%>
            <%}%>
          </tbody>

        </table>
  </div>
<%}%>

<%if(liveFootBall.length > 0 ){%>
  <div class="exchange-pg-tbl-ro2">
        <table class="acount-stat-tbl">

          <thead class="acount-stat-tbl-hed">
              <tr class="acount-stat-tbl-hed-tr" data-href='/exchange/football'>
                  <th style="text-align: left;" class="bod-red-lft ">Football</th>
                  <th></th>
                  <th colspan="2">1</th>
                  <th colspan="2">X</th>
                  <th colspan="2" class="bod-red-rit">2</th>
              </tr>
          </thead>

          <tbody class="acount-stat-tbl-body">
            <% let cricketNum = 1 %>
            <%for(let i = 0; i < liveFootBall.length; i++){%>
              <%if(liveFootBall[i].marketList.match_odd != null){%>
                <%
                  var timestamp = `${liveFootBall[i].eventData.time}` * 1000; 
                  var date = new Date(timestamp);
                  var options = { 
                    day: '2-digit',
                    month: 'short'
                  };
                  var formattedTime = date.toLocaleString('en-US', options);
                %>
                <%let timeOfGame%>
                <% let scoreOfGame%>
                <%if(liveFootBall[i].marketList.score != null){%>
                  <%timeOfGame = liveFootBall[i].marketList.score[0].data.match(/<span class="football-time">([^<]+)'/); %>
                    <% timeOfGame = timeOfGame ? timeOfGame[1].trim() + "'" : 'N/A'; %>
                
                    <% scoreOfGame = liveFootBall[i].marketList.score[0].data.match(/<span class="football-score">([^<]+)<\/span>/); %>
                    <% scoreOfGame = scoreOfGame ? scoreOfGame[1].trim() : 'N/A'; %>
                <%}%>
                  <!-- Displaying the extracted time and score -->
                  
                <tr class="acount-stat-tbl-body-tr tbl-data-href" onclick="window.location.href = '/exchange_inPlay/match?id=<%=liveFootBall[i].eventData.eventId%>'; ">
                    <td style="border-bottom: 0px;" class="name1" id="<%=liveFootBall[i].marketList.match_odd.marketId%>" >
                      <div class="exchange-pg-mytbl-body-cricket-data-dv">
                        <span class="exchange-pg-mytbl-body-liv-dot"></span>
                        <p>
                          <span><%=liveFootBall[i].eventData.league%></span> • <%=formattedTime%>
                        </p>
                        <p>
                            <b><%=liveFootBall[i].eventData.name%></b>
                        </p>
                        <%if(liveFootBall[i].marketList.score != null){%>
                          <span class="ctbal-scor-spn-wrp">
                            <span class="ctbal-scor-spn1"><%=timeOfGame%></span>
                            <span class="ctbal-scor-spn2"><%=scoreOfGame%></span>
                          </span>
                        <%} %>
                    </div>
                    </td>
                    <td style="border-bottom: 0px;" >
                      <div class="exchange-td2-txtdv">
                        <%if(liveFootBall[i].eventData.isTv){%>
                          <div class="exchange-td2-txtdv-tv">
                            <i class="fa-solid fa-tv c-activee"></i>
                          </div>
                        <%}%>
                        <div class="exchange-td2-txtdv-inn1">
                          <p> MO </p>
                          <span>35</span>
                        </div>
                        <div class="exchange-td2-txtdv-inn1">
                          <p> F </p>
                          <span>1</span>
                        </div>
                        <div class="exchange-td2-txtdv-inn1">
                          <p> M </p>
                          <span>1</span>
                        </div>
                        <div class="exchange-td2-txtdv-inn1">
                          <p> L </p>
                          <span>1</span>
                        </div>
                      </div>
                    </td>
                    <% let runners = JSON.parse(liveFootBall[i].marketList.match_odd.runners); %>
                    <% let runners1 = []; %>
                    <%let secIds = []; %>
                    <%runners.forEach(item => {%>
                        <%runners1.push(item.runner);%>
                        <%secIds.push(item.secId);%>
                    <%});%>
                    <%if(runners1.length === 2){%>
                    <td style="border-bottom: 0px;"  class="0B" id="<%=secIds[0]%>"></td>
                    <td style="border-bottom: 0px;"  class="0L" id="<%=secIds[0]%>"></td>
                    <td style="border-bottom: 0px;"  class="">
                      <span class="tbl-td-bg-blu-spn mylock-data">
                        <i class="fa-solid fa-lock"></i>
                      </span>
                    </td>
                    <td style="border-bottom: 0px;"  class="">
                      <span class="tbl-td-bg-pich-spn mylock-data">
                        <i class="fa-solid fa-lock"></i>
                      </span>
                    </td>
                    <td style="border-bottom: 0px;"  class="1B" id="<%=secIds[1]%>"></td>
                    <td style="border-bottom: 0px;"  class="1L" id="<%=secIds[1]%>"></td>
                    <td style="border-bottom: 0px;">
                      <a href="multi-market.html"><img src="../../assets/img/exchange/Vector.png" alt=""></a> 
                    </td>
                    <%}else{%>
                      <td style="border-bottom: 0px;"  class="0B" id="<%=secIds[0]%>"></td>
                        <td style="border-bottom: 0px;"  class="0L" id="<%=secIds[0]%>"></td>
                        <td style="border-bottom: 0px;"  class="2B" id="<%=secIds[2]%>"></td>
                        <td style="border-bottom: 0px;"  class="2L" id="<%=secIds[2]%>"></td>
                        <td style="border-bottom: 0px;"  class="1B" id="<%=secIds[1]%>"></td>
                        <td style="border-bottom: 0px;"  class="1L" id="<%=secIds[1]%>"></td>
                        <td style="border-bottom: 0px;">
                          <a href="multi-market.html"><img src="../../assets/img/exchange/Vector.png" alt=""></a> 
                        </td>
                    <%}%>
                </tr>
                <%cricketNum++%>
              <%}%>
            <%}%>
              
          </tbody>

        </table>
  </div>
<%}%>

<%if(liveTennis.length > 0 ){%>
  <div class="exchange-pg-tbl-ro2">
        <table class="acount-stat-tbl">

          <thead class="acount-stat-tbl-hed">
              <tr class="acount-stat-tbl-hed-tr" data-href='/exchange/tennis'>
                  <th style="text-align: left;" class="bod-red-lft ">Tennis</th>
                  <th></th>
                  <th colspan="2">1</th>
                  <th colspan="2">X</th>
                  <th colspan="2" class="bod-red-rit">2</th>
              </tr>
          </thead>

          <tbody class="acount-stat-tbl-body">
            <% let cricketNum = 1 %>
            <%for(let i = 0; i < liveTennis.length; i++){%>
              <%if(liveTennis[i].marketList.match_odd != null){%>
                <%
                  var timestamp = `${liveTennis[i].eventData.time}` * 1000; 
                  var date = new Date(timestamp);
                  var options = { 
                    day: '2-digit',
                    month: 'short'
                  };
                  var formattedTime = date.toLocaleString('en-US', options);
                %>
                <% let player1Score = 'N/A'; %>
                <% let player2Score = 'N/A'; %>
                <%if(liveTennis[i].marketList.score != null){%>
                  <% const scoreRegex = /<span class="set current">(\d+)<\/span>/g; %>
                  <% const scores = liveTennis[i].marketList.score[0].data.match(scoreRegex); %>
  
                  <% if (scores && scores.length >= 4) { %>
                      <% player1Score = parseInt(scores[2], 10) - parseInt(scores[0], 10); %>
                      <% player2Score = parseInt(scores[3], 10) - parseInt(scores[1], 10); %>
                  <% } %>
                <%}%>


                <tr class="acount-stat-tbl-body-tr tbl-data-href" onclick="window.location.href = '/exchange_inPlay/match?id=<%=liveTennis[i].eventData.eventId%>'; ">
                    <td style="border-bottom: 0px;" class="name1" id="<%=liveTennis[i].marketList.match_odd.marketId%>" >
                      <div class="exchange-pg-mytbl-body-cricket-data-dv">
                        <span class="exchange-pg-mytbl-body-liv-dot"></span>
                        <p>
                          <span><%=liveTennis[i].eventData.league%></span> • <%=formattedTime%>
                        </p>
                        <p>
                            <b><%=liveTennis[i].eventData.name%></b>
                        </p>
                        <%if(liveTennis[i].marketList.score != null){%>
                          <!-- <span class="ctbal-scor-spn-wrp">
                            <span class="ctbal-scor-spn1"><%=player1Score%></span>
                            <span class="ctbal-scor-spn2"><%=player2Score%></span>
                          </span> -->
                        <% }%>
                    </div>
                    </td>
                    <td style="border-bottom: 0px;" >
                      <div class="exchange-td2-txtdv">
                        <%if(liveTennis[i].eventData.isTv){%>
                          <div class="exchange-td2-txtdv-tv">
                            <i class="fa-solid fa-tv c-activee"></i>
                          </div>
                        <%}%>
                        <div class="exchange-td2-txtdv-inn1">
                          <p> MO </p>
                          <span>35</span>
                        </div>
                        <div class="exchange-td2-txtdv-inn1">
                          <p> F </p>
                          <span>1</span>
                        </div>
                        <div class="exchange-td2-txtdv-inn1">
                          <p> M </p>
                          <span>1</span>
                        </div>
                        <div class="exchange-td2-txtdv-inn1">
                          <p> L </p>
                          <span>1</span>
                        </div>
                      </div>
                    </td>
                    <% let runners = JSON.parse(liveTennis[i].marketList.match_odd.runners); %>
                    <% let runners1 = []; %>
                    <%let secIds = []; %>
                    <%runners.forEach(item => {%>
                        <%runners1.push(item.runner);%>
                        <%secIds.push(item.secId);%>
                    <%});%>
                    <%if(runners1.length === 2){%>
                    <td style="border-bottom: 0px;"  class="0B" id="<%=secIds[0]%>"></td>
                    <td style="border-bottom: 0px;"  class="0L" id="<%=secIds[0]%>"></td>
                    <td style="border-bottom: 0px;"  class="">
                      <span class="tbl-td-bg-blu-spn mylock-data">
                        <i class="fa-solid fa-lock"></i>
                      </span>
                    </td>
                    <td style="border-bottom: 0px;"  class="">
                      <span class="tbl-td-bg-pich-spn mylock-data">
                        <i class="fa-solid fa-lock"></i>
                      </span>
                    </td>
                    <td style="border-bottom: 0px;"  class="1B" id="<%=secIds[1]%>"></td>
                    <td style="border-bottom: 0px;"  class="1L" id="<%=secIds[1]%>"></td>
                    <td style="border-bottom: 0px;">
                      <a href="multi-market.html"><img src="../../assets/img/exchange/Vector.png" alt=""></a> 
                    </td>
                    <%}else{%>
                      <td style="border-bottom: 0px;"  class="0B" id="<%=secIds[0]%>"></td>
                        <td style="border-bottom: 0px;"  class="0L" id="<%=secIds[0]%>"></td>
                        <td style="border-bottom: 0px;"  class="2B" id="<%=secIds[2]%>"></td>
                        <td style="border-bottom: 0px;"  class="2L" id="<%=secIds[2]%>"></td>
                        <td style="border-bottom: 0px;"  class="1B" id="<%=secIds[1]%>"></td>
                        <td style="border-bottom: 0px;"  class="1L" id="<%=secIds[1]%>"></td>
                        <td style="border-bottom: 0px;">
                          <a href="multi-market.html"><img src="../../assets/img/exchange/Vector.png" alt=""></a> 
                        </td>
                    <%}%>
                </tr>
                <%cricketNum++%>
              <%}%>
            <%}%>           
          </tbody>

        </table>
  </div>
<%}%>

